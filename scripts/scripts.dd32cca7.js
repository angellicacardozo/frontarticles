"use strict";function CreateArticleController(a,b,c){function d(){this.title="",this.slug="",this.excerpt="",this.content="",this.tags=""}this.model=new d,this.doSave=function(){a.add(this.model),c.setMessage("Artigo cadastrado com sucesso!","success"),b.path("/")}}function ListArticleController(a,b,c){this.flash=c,this.flash.showMessage(),this.getAll=function(){return a.list()},this.doRead=function(a){b.set(a)},this.doEdit=function(a){b.set(a)},this.doDelete=function(a){b.set(a)}}function ReadArticleController(a){this.model=a.get()}function UpdateArticleController(a,b,c,d){this.model=a.get(),this.doUpdate=function(){b.update(this.model),c.setMessage("Artigo editado com sucesso!","success"),d.path("/")}}function DeleteArticleController(a,b,c,d){this.model=a.get(),this.doDelete=function(){b["delete"](this.model),c.setMessage("Artigo removido com sucesso!","success"),d.path("/")}}angular.module("articleModule",["ngCookies","ngResource","ngRoute","toastr","LocalStorageModule"]),function(){function a(a){this.articles=a.get("articles")||[],this.add=function(b){this.articles.push(b),a.set("articles",this.articles)},this.update=function(a){this.articles.forEach(function(b){b===a&&(b.title=a.title,b.excerpt=a.excerpt,b.content=a.content,b.tags=a.tags)})},this.list=function(){return this.articles||[]},this["delete"]=function(b){this.articles=this.articles.filter(function(a){return a!==b}),a.set("articles",this.articles)}}function b(){this.model=null,this.set=function(a){this.model=a},this.get=function(){return this.model}}angular.module("articleModule").config(["localStorageServiceProvider",function(a){a.setPrefix("ls")}]).service("StorageService",a).service("ShareArticleService",b),a.$inject=["localStorageService"]}(),function(){function a(){return function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}}angular.module("articleModule").filter("slugPattern",a)}(),function(){function a(a,b){var c=[];return{setMessage:function(a,b){c.push({message:a,type:b})},getMessage:function(){return c.shift()||null},showMessage:function(){var a=this.getMessage();if(null!==a)switch(a.type){case"info":b.info(a.message,"Informação...");break;case"success":b.success(a.message,"Sucesso...")}}}}angular.module("articleModule").factory("flash",a),a.$inject=["$rootScope","toastr"]}(),angular.module("articleModule").controller("CreateArticleController",CreateArticleController).config(["$routeProvider",function(a){a.when("/create",{templateUrl:"views/article/create.html",controller:"CreateArticleController",controllerAs:"article"})}]),CreateArticleController.$inject=["StorageService","$location","flash"],angular.module("articleModule").controller("ListArticleController",ListArticleController).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/article/list.html",controller:"ListArticleController",controllerAs:"article"})}]),ListArticleController.$inject=["StorageService","ShareArticleService","flash"],angular.module("articleModule").controller("ReadArticleController",ReadArticleController).config(["$routeProvider",function(a){a.when("/read/:slug",{templateUrl:"views/article/read.html",controller:"ReadArticleController",controllerAs:"article"})}]),ReadArticleController.$inject=["ShareArticleService"],angular.module("articleModule").controller("UpdateArticleController",UpdateArticleController).config(["$routeProvider",function(a){a.when("/edit/:slug",{templateUrl:"views/article/update.html",controller:"UpdateArticleController",controllerAs:"article"})}]),UpdateArticleController.$inject=["ShareArticleService","StorageService","flash","$location"],angular.module("articleModule").controller("DeleteArticleController",DeleteArticleController).config(["$routeProvider",function(a){a.when("/delete/:slug",{templateUrl:"views/article/delete.html",controller:"DeleteArticleController",controllerAs:"article"})}]),DeleteArticleController.$inject=["ShareArticleService","StorageService","flash","$location"],angular.module("articleModule").run(["$templateCache",function(a){a.put("views/article/create.html",'<h2>Cadastrar artigo</h2> <form ng-controller="CreateArticleController" class="form-horizontal" name="articleForm" ng-submit="article.doSave()"> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Titulo:</label> <div class="col-sm-10"> <input id="titulo" name="titulo" ng-required="true" placeholder="Pensa em escrever o que?" ng-model="article.model.title"> </div> </div> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Tags:</label> <div class="col-sm-10"> <input ng-required="true" ng-model="article.model.tags"> </div> </div> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Sum&aacute;rio:</label> <div class="col-sm-10"> <textarea ng-model="article.model.excerpt" ng-required="true"></textarea> </div> </div> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Conte&uacute;do:</label> <div class="col-sm-10"> <textarea ng-model="article.model.content" ng-required="true"></textarea> </div> </div> <input type="submit" class="btn btn-primary" value="Salvar"> </form>'),a.put("views/article/delete.html",'<h2>Deseja remover o artigo?</h2> <form ng-controller="DeleteArticleController" class="form-horizontal" name="articleForm" ng-submit="article.doDelete()"> <dl> <dt>Título</dt> <dd>{{article.model.title}}</dd> <dt>Sum&aacute;rio</dt> <dd>{{article.model.excerpt}}</dd> <dt>Conte&uacute;do:</dt> <dd>{{article.model.content}}</dd> </dl> <div class="btn-group" role="group" aria-label="..."> <input type="submit" class="btn btn-primary" value="Confirmar"> <a class="btn btn-default" ng-href="#/">Cancelar</a> </div> </form>'),a.put("views/article/list.html",'<section ng-controller="ListArticleController"> <h1>Artigos cadastrados</h1> <article ng-repeat="model in article.getAll()"> <h1>{{model.title}}, {{model.title | slugPattern}}</h1> <p class="excerpt">{{model.excerpt}}</p> <div class="btn-group" role="group" aria-label="..."> <a ng-click="article.doRead(model)" ng-href="#/read/{{model.title | slugPattern}}" class="btn btn-default">Visualizar</a> <a ng-click="article.doEdit(model)" ng-href="#/edit/{{model.title | slugPattern}}" class="btn btn-default">Editar</a> <a ng-click="article.doDelete(model)" ng-href="#/delete/{{model.title | slugPattern}}" class="btn btn-default">Remover</a> </div> </article> </section> <div ng-if="article.getAll().length===0" class="alert alert-info"> <strong>Info!</strong> Nenhum artigo cadastrado. </div>'),a.put("views/article/read.html",'<h2>Visualizando artigo</h2> <dl ng-controller="ReadArticleController"> <dt>Título</dt> <dd>{{article.model.title}}</dd> <dt>Sum&aacute;rio</dt> <dd>{{article.model.excerpt}}</dd> <dt>Conte&uacute;do:</dt> <dd>{{article.model.content}}</dd> </dl>'),a.put("views/article/update.html",'<h2>Atualizar artigo</h2> <form ng-controller="UpdateArticleController" class="form-horizontal" name="articleForm" ng-submit="article.doUpdate()"> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Titulo:</label> <div class="col-sm-10"> <input id="titulo" name="titulo" ng-required="true" placeholder="Pensa em escrever o que?" ng-model="article.model.title"> </div> </div> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Tags:</label> <div class="col-sm-10"> <input ng-required="true" ng-model="article.model.tags"> </div> </div> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Sum&aacute;rio:</label> <div class="col-sm-10"> <textarea ng-model="article.model.excerpt" ng-required="true"></textarea> </div> </div> <div class="form-group"> <label class="control-label col-sm-2" for="titulo">Conte&uacute;do:</label> <div class="col-sm-10"> <textarea ng-model="article.model.content" ng-required="true"></textarea> </div> </div> <div class="btn-group" role="group" aria-label="..."> <input type="submit" class="btn btn-primary" value="Salvar"> <a class="btn btn-default" ng-href="#/">Cancelar</a> </div> </form>')}]);